apiVersion: monitoring.coreos.com/v1
kind: Probe
metadata:
  name: ticketing-app-health-check
  namespace: monitoring  # Must be where your Prometheus Operator is running
  labels:
    release: prometheus-stack  # IMPORTANT: Match your Prometheus instance label
spec:
  jobName: ticketing-app-health
  prober:
    url: blackbox-prometheus-blackbox-exporter.monitoring.svc:9115 # Update if your exporter name differs
  module: http_2xx       # Checks for status 200-299
  targets:
    staticConfig:
      static:
      # REPLACE THIS with the URL you verified in Step 2
      - http://ticketing-app-service.ticketing-app.svc.cluster.local:80/health
  interval: 30s          # Checks every 30 seconds (very low impact)
